echo 'hello from Workflow'

stage 'build'
node {
  git url: 'https://github.com/anyone-can-test/jenkins-workflow-test.git'
  runTests() 

  // step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/TEST-*.xml'])
}


stage 'QA'
parallel(longerTests: {
   runTests()
}, quickerTests: {
   runTests()
})



def runTests() {
   node {
      git url: 'https://github.com/anyone-can-test/jenkins-workflow-test.git'
      def mvnHome = tool 'Maven 3.x'
      sh "${mvnHome}/bin/mvn -B -Dmaven.test.failure.ignore verify"
  }
}


